resources:
  jobs:
    approach_sql:
      name: "[${var.environment}] medallion-sql"
      tags:
        project: medallion
        approach: sql
      tasks:
        - task_key: bronze
          notebook_task:
            notebook_path: ../src/sql/bronze.sql
            base_parameters:
              catalog_name: ${var.catalog_name}
              schema: ${resources.schemas.schema_approach_sql.name}
              landing_schema: ${resources.schemas.schema_landing.name}
              volume_name: ${resources.volumes.raw_files.name}
        - task_key: silver
          depends_on:
            - task_key: bronze
          notebook_task:
            notebook_path: ../src/sql/silver.sql
            base_parameters:
              catalog_name: ${var.catalog_name}
              schema: ${resources.schemas.schema_approach_sql.name}
        - task_key: gold
          depends_on:
            - task_key: silver
          notebook_task:
            notebook_path: ../src/sql/gold.sql
            base_parameters:
              catalog_name: ${var.catalog_name}
              schema: ${resources.schemas.schema_approach_sql.name}
